<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Field Model</title>
  <link rel="stylesheet" href="/css/admin_product_model.css">
 
</head>
<body>
  <h2>Configure Product Fields</h2>

<h3>Add New Field</h3>
<form action="/products/model-editor/add-field" method="POST">
  <input type="text" name="name" placeholder="Field name" required>
  <select name="type">
    <option value="text">Text</option>
    <option value="number">Number</option>
    <option value="dropdown">Dropdown</option>
  </select>
  <input type="text" name="unit" placeholder="Unit (optional)">
  <input type="text" name="description" placeholder="Description (optional)">
  <button type="submit">Add Field</button>
</form>

<hr>



<form action="/products/model-editor/save" method="POST">

<% model.fields.forEach(field => { %>
  <div class="field-block">
    <b><%= field.name %></b>
    <form action="/products/model/delete-field" method="POST" style="display:inline;">
      <input type="hidden" name="fieldName" value="<%= field.name %>">
      <button type="submit">❌ Delete Field</button>
    </form>

    <ul>
      <% field.values.forEach(val => { %>
        <li>
          <%= val %>
          <form action="/products/model/delete-value" method="POST" style="display:inline;">
            <input type="hidden" name="fieldName" value="<%= field.name %>">
            <input type="hidden" name="value" value="<%= val %>">
            <button type="submit">✖</button>
          </form>
        </li>
      <% }) %>
    </ul>
  </div>



      <div class="field-group">
        <label><%= field.name %></label>
        <div class="options" id="<%= field.name %>_options">
          <% field.values.forEach(value => { %>
            <div class="option inactive">
              <input type="checkbox" name="<%= field.name %>" value="<%= value %>">
              <span><%= value %></span>
            </div>
          <% }) %>
        </div>
        <div class="add-box">
          <input type="text" placeholder="Add new <%= field.name %>..." id="add_<%= field.name %>">
          <button type="button" onclick="addOption('<%= field.name %>')">Add</button>
        </div>
      </div>
    <% }) %>

    <button type="submit">Save Product</button>
  </form>
 
<script>
  function addOption(fieldName) {
    const input = document.getElementById('add_' + fieldName);
    const value = input.value.trim();
    if (!value) return;

    const container = document.getElementById(fieldName + '_options');

    const wrapper = document.createElement('div');
    wrapper.className = 'option active';
    wrapper.innerHTML = `
      <input type="checkbox" name="${fieldName}" value="${value}" checked>
      <span>${value}</span>
    `;

    container.prepend(wrapper);
    input.value = '';
  }
</script>


</body>
</html>
